# 配對遊戲

參考：[水果配對](https://book2.17coding.net/chapter1.html)



!!! abstract "目標"

    - 下載、處理所需圖片
    - 會使用清單
    - 會畫流程圖
    - 
## 開始 & 界面設計
- [PNGWing](https://www.pngwing.com/) 下載 8 張 80x80 水果圖片
- 界面設計
  
![Alt text](image1.png)


## 螢幕初始化

### 背面圖
- 建立按鈕清單
- 顯示按鈕背面圖

![Alt text](<blocks1.png>)

### 正面圖

- 建立圖片名稱清單

![Alt text](variable_%E5%9C%96%E7%89%87%E5%90%8D%E7%A8%B1%E6%B8%85%E5%96%AE.png)

- 顯示按鈕正面圖

![Alt text](function_%E5%88%9D%E5%A7%8B%E5%8C%96%E6%8C%89%E9%88%95%E6%B8%85%E5%96%AE%E6%AD%A3%E9%9D%A2%E5%9C%96.png)

- 在 screen1 中呼叫「初始化按鈕清單正面圖」
- 看一下，是不是顯示出水果圖案了

### 亂數顯示按鈕正面圖

接下來，我想做一件事情，把「圖片名稱清單」想辦法弄到另一個清單，而且是**亂數**排列的。

- 產生一個全域的「亂排圖片名稱清單」
- 定義一個程序「填入亂排圖片名稱清單」
    - 暫時內變量「暫時圖片們」
    - 想辦法把2份圖丟到「暫時圖片們」
    - 把「暫時圖片們」取亂數丟到「亂排圖片名稱清單」，並刪除

![Alt text](function_%E5%A1%AB%E5%85%A5%E4%BA%82%E6%8E%92%E5%9C%96%E7%89%87%E5%90%8D%E7%A8%B1%E6%B8%85%E5%96%AE.png)

- 修改「初始化按鈕清單正面圖」
- 在 screen1 中增加呼叫「填入亂排圖片名稱清單」


!!! tip "停看聽"

    好了，目前為止，請仔細想想，你到底做了什麼。

    ![Alt text](blocks_all2.png)


!!! question "想一想"

    你可以用別的方法處理「亂排圖片名稱清單」嗎？

    ![Alt text](alternative_%E4%BA%82%E6%8E%92%E5%9C%96%E7%89%87%E5%90%8D%E7%A8%B1%E6%B8%85%E5%96%AE.png)

## Debug

上次上課「pair_up_fruits_1215」，有些小問題，我們來看看如何 Debug

![Alt text](fruit_pair_up_1215.png)

- 填入亂排圖片名稱清單中，有16個圖
- 填入亂排圖片名稱清單中，增加圖弄錯了
- 沒有呼叫填入亂排圖片名稱清單中

## 作業檢查點

到目前為止，你需要

- 能全部顯示小綠人的背景圖
- 能全部顯示隨機的水果圖

## 處理翻牌

### 先從按鈕1、按鈕2開始

- 先 「折疊所有程式方塊」、「垂直排列所有程式方塊」整理一下程式畫面
- 顯示背景圖
- 點選按鈕1、按鈕2 顯示水果圖

![Alt text](1220_button1_1.png)
![Alt text](1220_button2_1.png)


### 流程圖 (想一想，你要做什麼)

畫流程圖的工具

- [draw.io](http://draw.io/)
- [Excalidraw](https://excalidraw.com/)
- 文字敘述生成
    - [Mermaid](https://mermaid.js.org/)
    - [PlantUML](https://plantuml.com/zh/)

``` mermaid
graph TB
    id1((" ")) --> id2("點擊卡片(按鈕)")
    id2 --> id3("顯示正面水果圖(翻牌)")
    id3 --> id4{"這是2張中的第1張嗎？"}
    id4 -- "是" --> id5("記住第1張")
    id4 -- "不是" --> id6("記住第2張")
    id5 --> id1
    id6 --> id7{"翻出的這2張圖有一樣嗎？"}
    id7 -- "是" --> id8("記住已翻開的正確對數")
    id7 -- "不是" --> id9("將這2張牌蓋牌")
    id8 --> id10(忘記已翻開的這2張圖)
    id9 --> id10
    id10 --> id1
```

### 把流程做上

![Alt text](1228_b1.png)

按鈕2也是一樣，但是請看清楚哪裡和按鈕1不同

![Alt text](1228_b2.png)

### 處理 2 張圖片相同

- 記住翻牌數
- 積分
- 8 對遊戲結束

把其中判斷的區塊取代為下：

![Alt text](1228_matched.png)

為了測試，你可以這樣做：

- 如下圖，把1和2圖片手動設成相同，執行時先按一下按鈕16
- 把配對的翻牌數一開始設為7

![Alt text](1228_b16.png)

### 處理 2 張圖片不同

- 蓋圖，顯示背景圖
- 啟用計時器

![Alt text](1228_b1_t.png)

![Alt text](1228_t.png)

## 作業檢查點

到目前為止，你需要

- 翻牌 (按鈕1、按鈕2)
- 測試程式結束